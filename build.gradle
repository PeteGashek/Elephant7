allprojects {
    apply plugin: "java"

    repositories {
        mavenCentral()
    }
}

project.ext.buildAndDeployTaskGroup = "build and deploy"

project.ext.generatedDir = buildDir.path + "/generated"

// default values for config.json
def defaultWorkingDir = "$tomcatBase/work/" + project.name

task generateConfig(type: Copy) {
    from project.projectDir
    include "base_config.json"

    into generatedDir
    rename("base_config.json", "config.json")

    expand(workingDir: defaultWorkingDir.replace("\\", "\\\\"))
}

project.ext.gsonVersion = "2.6.2"
project.ext.h2Version = "1.4.191"
project.ext.servletApiVersion = "3.1.0"
project.ext.springVersion = "4.2.5.RELEASE"

dependencies {
    compile "com.google.code.gson:gson:$gsonVersion"

    compile "com.h2database:h2:$h2Version"

    compileOnly "javax.servlet:javax.servlet-api:$servletApiVersion"

    compile "org.springframework:spring-context:$springVersion"
    compile "org.springframework:spring-webmvc:$springVersion"
}
